<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Network Research Project</title>
    
    <style>
        :root {
            --main-bg-color: #111122;
            --header-bg-color: #222233;
            --panel-bg-color: #1a1a2e;
            --text-color: #ffffff;
            --accent-color: #6666cc;
            --link-color: #99aaff;
            --node-color-physical: #3366cc;
            --node-color-network: #cc6633;
            --node-color-processing: #33cc66;
            --node-color-analysis: #9966ff;
            --node-color-visualization: #ff6699;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--main-bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: grid;
            grid-template-rows: auto 1fr auto;
            min-height: 100vh;
        }
        
        header {
            background-color: var(--header-bg-color);
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .nav-links {
            display: flex;
            gap: 1.5rem;
        }
        
        .nav-links a {
            color: var(--link-color);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: white;
        }
        
        .nav-links a.active {
            color: white;
            border-bottom: 2px solid white;
        }
        
        main {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 1rem;
            padding: 1rem;
            height: calc(100vh - 126px);
        }
        
        .visualization-container {
            background-color: var(--panel-bg-color);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .svg-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        #quantum-svg {
            width: 100%;
            height: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .info-panel {
            background-color: var(--panel-bg-color);
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
        }
        
        .info-panel h2 {
            margin-top: 0;
            border-bottom: 1px solid var(--accent-color);
            padding-bottom: 0.5rem;
        }
        
        .info-panel h3 {
            margin-bottom: 0.5rem;
            color: var(--link-color);
        }
        
        .info-panel p {
            line-height: 1.6;
        }
        
        footer {
            background-color: var(--header-bg-color);
            padding: 1rem;
            text-align: center;
            font-size: 0.9rem;
        }
        
        /* Node details section */
        #node-details {
            display: none;
        }
        
        .key-term {
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .github-link {
            display: inline-block;
            margin-top: 1rem;
            background-color: var(--accent-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .github-link:hover {
            background-color: #8888dd;
        }
        
        /* Loading indicator */
        #loading-indicator {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--node-color-physical);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Legend container */
        .legend-container {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 0.75rem;
            border-radius: 4px;
            max-width: 200px;
            z-index: 5;
        }
        
        .legend-title {
            font-size: 0.9rem;
            font-weight: bold;
            margin: 0 0 0.5rem 0;
            text-align: center;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 0.25rem 0;
            font-size: 0.8rem;
        }
        
        .legend-color {
            display: inline-block;
            width: 12px;
            height: 12px;
            margin-right: 6px;
            border-radius: 2px;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            main {
                grid-template-columns: 1fr;
                grid-template-rows: 1fr 1fr;
            }
            
            .legend-container {
                position: static;
                max-width: 100%;
                margin-top: 1rem;
            }
        }
        
        /* Debug panel */
        .debug-panel {
            display: none;
            background-color: #332211;
            padding: 0.5rem;
            margin-top: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">Quantum Network Research</div>
            <div class="nav-links">
                <a href="index.html" class="active">Overview</a>
                <a href="architecture.html">Architecture</a>
                <a href="implementation.html">Implementation</a>
                <a href="https://github.com/diannt/lucid-dream" target="_blank">GitHub</a>
            </div>
        </nav>
    </header>
    
    <main>
        <div class="visualization-container">
            <div id="loading-indicator">
                <div style="font-size:1.2rem; margin-bottom:1rem;">Loading visualization...</div>
                <div class="spinner"></div>
            </div>
            
            <div class="svg-wrapper">
                <object type="image/svg+xml" data="lib/svg/quantum-visualization.svg" id="quantum-svg">
                    Your browser does not support SVG
                </object>
            </div>
            
            <div class="legend-container">
                <div class="legend-title">Network Legend</div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: var(--node-color-physical);"></span>
                    <span>Physical Infrastructure</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: var(--node-color-network);"></span>
                    <span>Network Layer</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: var(--node-color-processing);"></span>
                    <span>Processing Layer</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: var(--node-color-analysis);"></span>
                    <span>Analysis Layer</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background-color: var(--node-color-visualization);"></span>
                    <span>Visualization Layer</span>
                </div>
            </div>
        </div>
        
        <div class="info-panel">
            <div id="project-overview">
                <h2>Project Overview</h2>
                <p>This open-source research project investigates quantum phenomena in networked systems, building on recent breakthroughs in quantum teleportation over conventional internet infrastructure.</p>
                
                <p>Our project focuses on three key quantum phenomena:</p>
                <ul>
                    <li><span class="key-term">Quantum Teleportation</span>: State transfer between spatially separated systems</li>
                    <li><span class="key-term">Temporal Information Effects</span>: Correlation patterns that exhibit temporal anomalies</li>
                    <li><span class="key-term">Information Clustering</span>: Emergence of coherent information structures across network nodes</li>
                </ul>
                
                <p>The interactive visualization on the left represents our system architecture. Click on any node to learn more about that component.</p>
                
                <h3>Recent Research Breakthroughs</h3>
                <p>
                    In December 2024, Northwestern University engineers successfully demonstrated quantum teleportation over conventional fiber optic cables carrying regular internet traffic. This groundbreaking achievement showed that quantum and classical communications can coexist on the same physical infrastructure.
                </p>
                <p>
                    Our research expands on this breakthrough by investigating not only quantum teleportation but also temporal effects and information clustering phenomena that emerge in such systems.
                </p>
                
                <h3>Project Goals</h3>
                <ul>
                    <li>Develop a comprehensive software architecture for quantum network research</li>
                    <li>Implement practical quantum teleportation protocols over conventional networks</li>
                    <li>Investigate temporal anomalies in quantum information transfer</li>
                    <li>Explore clustering patterns across quantum-connected network nodes</li>
                    <li>Create visualization tools that make quantum phenomena accessible</li>
                </ul>
                
                <a href="https://github.com/diannt/lucid-dream" class="github-link" target="_blank">Contribute on GitHub</a>
                
                <div class="debug-panel" id="debug-output">
                    Debug information will appear here.
                </div>
            </div>
            
            <div id="node-details">
                <h2 id="node-title">Component Details</h2>
                <p id="node-description">Select a component in the visualization to see details.</p>
                
                <h3>Technical Specifications</h3>
                <div id="node-specs"></div>
                
                <h3>Connections</h3>
                <div id="node-connections"></div>
            </div>
        </div>
    </main>
    
    <footer>
        <p>Quantum Network Research Project | Open Source | 2025</p>
    </footer>
    
    <script>
        // Node component details - same as in the original vis.js implementation
        const nodeDetails = {
            'fiber': {
                title: 'Fiber Optic Network',
                description: 'The physical layer that provides the medium for both quantum and classical communication.',
                specs: `
                    <ul>
                        <li>30km fiber optic cable loop with wavelength division multiplexing</li>
                        <li>Optical splitters for traffic mirroring and analysis</li>
                        <li>Wavelength filters for quantum channel isolation (1550nm band)</li>
                    </ul>
                `,
                connections: 'Connects to the Quantum Channel and Classical Channel, providing the physical medium for data transmission.'
            },
            'biometric': {
                title: 'Biometric Devices',
                description: 'Collects physiological data from participants to correlate with quantum information patterns.',
                specs: `
                    <ul>
                        <li>Heart rate variability (HRV) monitors</li>
                        <li>Electroencephalogram (EEG) headsets</li>
                        <li>Galvanic skin response sensors</li>
                    </ul>
                `,
                connections: 'Data flows to the Classical Channel and eventually to the Biometric Correlation module for analysis.'
            },
            'hardware': {
                title: 'Computing Hardware',
                description: 'Provides the processing capabilities for quantum simulations and data analysis.',
                specs: `
                    <ul>
                        <li>High-performance computing cluster (32+ cores)</li>
                        <li>FPGA-based quantum random number generators</li>
                        <li>Network traffic analyzers with nanosecond timestamps</li>
                    </ul>
                `,
                connections: 'Powers the Network Monitor component and provides computation resources for the entire system.'
            },
            'quantum-channel': {
                title: 'Quantum Channel',
                description: 'Manages the transmission of quantum information, primarily through entangled photons.',
                specs: `
                    <ul>
                        <li>QKD protocol implementation (BB84, E91)</li>
                        <li>Entanglement distribution management</li>
                        <li>Bell state measurement capabilities</li>
                    </ul>
                `,
                connections: 'Receives input from the Fiber Optic Network and transmits quantum states to the Teleportation Module.'
            },
            'classical-channel': {
                title: 'Classical Channel',
                description: 'Handles conventional network traffic while supporting quantum operations.',
                specs: `
                    <ul>
                        <li>TCP/IP stack with quantum protocol extensions</li>
                        <li>Synchronized timing distribution</li>
                        <li>Metadata exchange for quantum teleportation coordination</li>
                    </ul>
                `,
                connections: 'Receives data from both Fiber Network and Biometric Devices, transmitting to the Temporal Effects module.'
            },
            'network-monitor': {
                title: 'Network Monitor',
                description: 'Tracks all network activity and correlates quantum and classical events.',
                specs: `
                    <ul>
                        <li>Deep packet inspection for classical traffic</li>
                        <li>Quantum channel noise analysis</li>
                        <li>Timing correlation between events</li>
                    </ul>
                `,
                connections: 'Monitors all network activity and feeds data to the Quantum Clustering module for pattern analysis.'
            },
            'teleportation': {
                title: 'Teleportation Module',
                description: 'Implements quantum teleportation protocols between network nodes.',
                specs: `
                    <ul>
                        <li>Bell state preparation and measurement</li>
                        <li>Classical channel coordination</li>
                        <li>Teleportation fidelity verification</li>
                    </ul>
                `,
                connections: 'Receives quantum states from the Quantum Channel, connects to Temporal Effects, and sends data to Entanglement Analysis.'
            },
            'temporal': {
                title: 'Temporal Effects Module',
                description: 'Analyzes and simulates temporal anomalies in quantum information flow.',
                specs: `
                    <ul>
                        <li>Delayed-choice experiment implementations</li>
                        <li>Retrocausal correlation detection</li>
                        <li>Wheeler-DeWitt equation simulation</li>
                    </ul>
                `,
                connections: 'Interfaces with both Teleportation and Clustering modules, and sends data to Biometric Correlation analysis.'
            },
            'clustering': {
                title: 'Quantum Clustering Module',
                description: 'Detects emergent information structures across the quantum network.',
                specs: `
                    <ul>
                        <li>Quantum mutual information calculation</li>
                        <li>Clustering algorithm for information density</li>
                        <li>Field theory simulation for quantum dynamics</li>
                    </ul>
                `,
                connections: 'Processes data from Network Monitor and Temporal Effects, feeding into Pattern Detection.'
            },
            'entanglement': {
                title: 'Entanglement Analysis',
                description: 'Measures and characterizes quantum entanglement properties across the system.',
                specs: `
                    <ul>
                        <li>Entanglement entropy calculation</li>
                        <li>Bell inequality violation detection</li>
                        <li>Entanglement distillation metrics</li>
                    </ul>
                `,
                connections: 'Analyzes data from the Teleportation Module and sends results to the Quantum State Visualizer.'
            },
            'bio-correlation': {
                title: 'Biometric Correlation',
                description: 'Correlates human physiological states with quantum information patterns.',
                specs: `
                    <ul>
                        <li>Time-series correlation analysis</li>
                        <li>Group synchronization detection</li>
                        <li>Anomaly detection in human-quantum interactions</li>
                    </ul>
                `,
                connections: 'Receives data from the Temporal Effects Module and visualizes results in the Correlation Dashboard.'
            },
            'pattern': {
                title: 'Pattern Detection',
                description: 'Identifies significant patterns in quantum-classical interactions across the system.',
                specs: `
                    <ul>
                        <li>Wavelet analysis for time-frequency correlations</li>
                        <li>Information flow directionality assessment</li>
                        <li>Emergent pattern classification</li>
                    </ul>
                `,
                connections: 'Processes data from Quantum Clustering and displays results in the Real-time Monitor.'
            },
            'state-viz': {
                title: 'Quantum State Visualizer',
                description: 'Provides intuitive representations of quantum states and operations.',
                specs: `
                    <ul>
                        <li>Bloch sphere visualization for qubits</li>
                        <li>Quantum circuit diagram generation</li>
                        <li>Entanglement network mapping</li>
                    </ul>
                `,
                connections: 'Displays data from Entanglement Analysis and provides feedback to the Teleportation Module.'
            },
            'correlation-dash': {
                title: 'Correlation Dashboard',
                description: 'Displays relationships between quantum information and other systems, particularly human biometrics.',
                specs: `
                    <ul>
                        <li>Correlation matrix heatmaps</li>
                        <li>Time-series alignment views</li>
                        <li>Statistical significance indicators</li>
                    </ul>
                `,
                connections: 'Visualizes data from Biometric Correlation module for researchers to analyze.'
            },
            'monitor': {
                title: 'Real-time Monitor',
                description: 'Provides live monitoring of ongoing quantum network operations and experiments.',
                specs: `
                    <ul>
                        <li>System health and performance metrics</li>
                        <li>Event logging and alerting</li>
                        <li>Experiment progress tracking</li>
                    </ul>
                `,
                connections: 'Displays data from Pattern Detection and provides feedback to the Quantum Clustering module.'
            }
        };

        // SVG element ID to node ID mapping
        const svgToNodeMap = {
            // Physical Layer
            'physical-fiber': 'fiber',
            'physical-biometric': 'biometric',
            'physical-hardware': 'hardware',
            
            // Network Layer
            'network-quantum': 'quantum-channel',
            'network-classical': 'classical-channel',
            'network-monitor': 'network-monitor',
            
            // Processing Layer
            'processing-teleportation': 'teleportation',
            'processing-temporal': 'temporal',
            'processing-clustering': 'clustering',
            
            // Analysis Layer
            'analysis-entanglement': 'entanglement',
            'analysis-biometric': 'bio-correlation',
            'analysis-pattern': 'pattern',
            
            // Visualization Layer
            'visualization-state': 'state-viz',
            'visualization-dashboard': 'correlation-dash',
            'visualization-monitor': 'monitor'
        };

        // Wait for DOM content to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM content loaded. Setting up interactive SVG...');
            
            // Reference to the SVG object
            const svgObject = document.getElementById('quantum-svg');
            
            // Hide the loading indicator when the SVG is fully loaded
            svgObject.addEventListener('load', function() {
                console.log('SVG loaded successfully');
                document.getElementById('loading-indicator').style.display = 'none';
                
                // Get access to the SVG document
                const svgDoc = svgObject.contentDocument;
                
                // Make sure we have access to the SVG document
                if (!svgDoc) {
                    console.error('Could not access SVG document');
                    return;
                }
                
                // Find all clickable elements (rect or g elements with IDs)
                const clickableElements = svgDoc.querySelectorAll('[id]');
                
                console.log('Found ' + clickableElements.length + ' clickable elements in SVG');
                
                // Add click event listeners to all elements
                clickableElements.forEach(element => {
                    // Check if this element's ID is in our mapping
                    const nodeId = svgToNodeMap[element.id];
                    
                    if (nodeId) {
                        // Make the element appear clickable
                        element.style.cursor = 'pointer';
                        
                        // Add hover effect
                        element.addEventListener('mouseover', function() {
                            // Store original fill
                            if (!this.dataset.originalFill) {
                                this.dataset.originalFill = this.getAttribute('fill') || '';
                            }
                            
                            // Highlight on hover
                            this.setAttribute('opacity', '0.8');
                        });
                        
                        element.addEventListener('mouseout', function() {
                            // Restore original appearance
                            this.setAttribute('opacity', '1');
                        });
                        
                        // Add click handler
                        element.addEventListener('click', function() {
                            console.log('SVG element clicked: ' + element.id + ' -> nodeId: ' + nodeId);
                            showNodeDetails(nodeId);
                        });
                    }
                });
                
                // Add click handler to background to reset to overview
                svgDoc.querySelector('svg').addEventListener('click', function(event) {
                    // Only trigger if the click was directly on the svg background
                    if (event.target === this) {
                        console.log('SVG background clicked, showing overview');
                        showOverview();
                    }
                });
                
                console.log('Interactive SVG setup complete');
            });
            
            // Handle loading errors
            svgObject.addEventListener('error', function() {
                console.error('Error loading SVG');
                document.getElementById('loading-indicator').innerHTML = `
                    <div style="color: #ff6666; text-align: center; padding: 2rem;">
                        <h3>Error Loading Visualization</h3>
                        <p>Could not load the SVG visualization. Please check if the file exists at path: lib/svg/quantum-visualization.svg</p>
                    </div>
                `;
            });
        });
        
        // Function to show node details
        function showNodeDetails(nodeId) {
            if (!nodeDetails[nodeId]) {
                console.error('No details found for node ID: ' + nodeId);
                return;
            }
            
            // Update the info panel
            document.getElementById('project-overview').style.display = 'none';
            document.getElementById('node-details').style.display = 'block';
            
            // Populate the details
            document.getElementById('node-title').textContent = nodeDetails[nodeId].title;
            document.getElementById('node-description').textContent = nodeDetails[nodeId].description;
            document.getElementById('node-specs').innerHTML = nodeDetails[nodeId].specs;
            document.getElementById('node-connections').textContent = nodeDetails[nodeId].connections;
        }
        
        // Function to show overview
        function showOverview() {
            document.getElementById('project-overview').style.display = 'block';
            document.getElementById('node-details').style.display = 'none';
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Network Research Project</title>
    
    <!-- Load libraries with specific versions that are known to work together -->
    <script src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js"></script>
    <script src="https://unpkg.com/vis-data@7.1.4/dist/vis-data.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.css">
    
    <style>
        :root {
            --main-bg-color: #111122;
            --header-bg-color: #222233;
            --panel-bg-color: #1a1a2e;
            --text-color: #ffffff;
            --accent-color: #6666cc;
            --link-color: #99aaff;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--main-bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background-color: var(--header-bg-color);
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        main {
            display: flex;
            flex-direction: column;
            flex: 1;
            padding: 1rem;
        }
        
        #visualization-container {
            flex: 1;
            background-color: var(--panel-bg-color);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
            min-height: 70vh;
        }
        
        #info-panel {
            background-color: var(--panel-bg-color);
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        footer {
            background-color: var(--header-bg-color);
            padding: 1rem;
            text-align: center;
        }
        
        /* For debugging */
        .debug-info {
            background-color: #332211;
            padding: 0.5rem;
            margin-top: 1rem;
            border-radius: 4px;
            font-family: monospace;
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>Quantum Network Research Project</h1>
    </header>
    
    <main>
        <div id="visualization-container"></div>
        
        <div id="info-panel">
            <h2>Project Overview</h2>
            <p>This open-source research project investigates quantum phenomena in networked systems, building on recent breakthroughs in quantum teleportation over conventional internet infrastructure.</p>
            
            <p>Our project focuses on three key quantum phenomena:</p>
            <ul>
                <li><strong>Quantum Teleportation</strong>: State transfer between spatially separated systems</li>
                <li><strong>Temporal Information Effects</strong>: Correlation patterns that exhibit temporal anomalies</li>
                <li><strong>Information Clustering</strong>: Emergence of coherent information structures across network nodes</li>
            </ul>
            
            <div class="debug-info" id="debug-panel">
                <h3>Debug Information</h3>
                <div id="debug-output">Waiting for visualization to initialize...</div>
            </div>
        </div>
    </main>
    
    <footer>
        <p>Quantum Network Research Project | Open Source | 2025</p>
    </footer>
    
    <script>
        // Enable debug mode - set to true to see debug info
        const debugMode = true;
        
        // Show debug panel if in debug mode
        if (debugMode) {
            document.getElementById('debug-panel').style.display = 'block';
        }
        
        // Log to both console and debug panel
        function debugLog(message) {
            console.log(message);
            if (debugMode) {
                const debugOutput = document.getElementById('debug-output');
                debugOutput.innerHTML += '<div>' + message + '</div>';
            }
        }
        
        // Initialize the visualization when the page is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('DOM fully loaded');
            initializeVisualization();
        });
        
        // Main visualization initialization
        function initializeVisualization() {
            try {
                debugLog('Starting visualization initialization');
                
                // Check if required libraries are loaded
                if (typeof vis === 'undefined') {
                    throw new Error('vis.js library not loaded');
                }
                
                // Select the container
                const container = document.getElementById('visualization-container');
                if (!container) {
                    throw new Error('Container element not found');
                }
                
                debugLog('Creating nodes dataset');
                
                // Create a basic nodes dataset
                const nodes = new vis.DataSet([
                    { id: 'physical', label: 'Physical\nInfrastructure', group: 'layer1' },
                    { id: 'network', label: 'Network\nLayer', group: 'layer2' },
                    { id: 'processing', label: 'Quantum\nProcessing', group: 'layer3' },
                    { id: 'analysis', label: 'Analysis\nLayer', group: 'layer4' },
                    { id: 'visualization', label: 'Visualization\nLayer', group: 'layer5' },
                    
                    { id: 'teleport', label: 'Teleportation', group: 'phenomena1' },
                    { id: 'temporal', label: 'Temporal\nEffects', group: 'phenomena2' },
                    { id: 'clustering', label: 'Information\nClustering', group: 'phenomena3' }
                ]);
                
                debugLog('Creating edges dataset');
                
                // Create edges to connect the nodes
                const edges = new vis.DataSet([
                    // Layer connections
                    { from: 'physical', to: 'network' },
                    { from: 'network', to: 'processing' },
                    { from: 'processing', to: 'analysis' },
                    { from: 'analysis', to: 'visualization' },
                    
                    // Phenomena connections
                    { from: 'processing', to: 'teleport', dashes: true },
                    { from: 'processing', to: 'temporal', dashes: true },
                    { from: 'processing', to: 'clustering', dashes: true },
                    
                    // Feedback loop
                    { from: 'visualization', to: 'physical', arrows: 'to', smooth: { type: 'curvedCW', roundness: 0.8 }, dashes: true }
                ]);
                
                debugLog('Setting up visualization options');
                
                // Configuration for the network graph
                const options = {
                    nodes: {
                        shape: 'box',
                        margin: 10,
                        font: {
                            size: 16,
                            color: 'white'
                        }
                    },
                    edges: {
                        width: 2,
                        color: {
                            color: '#ffffff',
                            highlight: '#aaaaff'
                        },
                        smooth: {
                            type: 'continuous'
                        }
                    },
                    layout: {
                        hierarchical: {
                            direction: 'UD',
                            sortMethod: 'directed',
                            levelSeparation: 150
                        }
                    },
                    groups: {
                        layer1: { color: { background: '#3366cc', border: '#88aaff' } },
                        layer2: { color: { background: '#cc6633', border: '#ffaa88' } },
                        layer3: { color: { background: '#33cc66', border: '#88ffaa' } },
                        layer4: { color: { background: '#9966ff', border: '#bbaaff' } },
                        layer5: { color: { background: '#ff6699', border: '#ffaacc' } },
                        
                        phenomena1: { color: { background: '#66ccff', border: '#aaddff' } },
                        phenomena2: { color: { background: '#ffcc66', border: '#ffdd88' } },
                        phenomena3: { color: { background: '#cc66ff', border: '#dd88ff' } }
                    }
                };
                
                debugLog('Creating network');
                
                // Initialize the network
                const network = new vis.Network(container, { nodes, edges }, options);
                
                // Add event listener for clicks
                network.on('click', function(params) {
                    if (params.nodes.length > 0) {
                        const nodeId = params.nodes[0];
                        const node = nodes.get(nodeId);
                        debugLog('Clicked on node: ' + node.label);
                    }
                });
                
                debugLog('Visualization successfully initialized');
            } catch (error) {
                console.error('Error initializing visualization:', error);
                debugLog('ERROR: ' + error.message);
                
                // Display error in the visualization container
                const container = document.getElementById('visualization-container');
                if (container) {
                    container.innerHTML = `
                        <div style="padding: 2rem; color: #ff6666;">
                            <h3>Visualization Error</h3>
                            <p>${error.message}</p>
                            <p>Check browser console for more details (F12 key).</p>
                        </div>
                    `;
                }
            }
        }
    </script>
</body>
</html>
